---
import type { CollectionEntry } from 'astro:content';
import orderBy from 'lodash/orderBy';
import TagList from '@/components/atoms/TagList.astro';
import { formatDate } from '@/helpers/date';

type Props = {
  entry: CollectionEntry<'articles'>;
};

const { entry } = Astro.props;

const href = entry.data.external ?? `/articles/${entry.id}`;
const target = entry.data.external ? '_blank' : undefined;
const tags = orderBy(entry.data.tags);
---

<a class="group/link outline-none" href={href} target={target}>
  <article
    class="block rounded-lg bg-neutral-800 p-4 outline-none group-hover/link:ring group-hover/link:ring-primary-200 group-focus-visible/link:ring group-focus-visible/link:ring-primary-200"
  >
    <h2
      class="mb-3 font-medium text-primary-200 text-lg group-hover/link:underline group-focus-visible/link:underline"
    >
      {entry.data.title}
    </h2>
    <p class="my-0 text-neutral-400 text-sm">{entry.data.summary}</p>
    {
      tags && (
        <div class="mt-5">
          <TagList tags={[formatDate(entry.data.date), ...tags]} />
        </div>
      )
    }
  </article>
</a>
